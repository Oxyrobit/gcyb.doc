---
sidebar_position: 2
---
# Configuration

Fichier de configuration
```bash
sudo vim /etc/named.conf
```

:::danger Attention
Toutes les lignes de configuration finissent par ;
:::

### Paramétrer bind en mode récursif (resolveur)
Ajouter ou modifier les lignes suivantes dans le fichier de configuration `/etc/named.conf`:
```conf
    options {
            # Remplacer @ip_interface par l'ip de l'interface réseau
            listen-on port 53 { @ip_interface; };
            directory "/var/named";

            #Remplacer @ip_reseau par le réseau autorisé à faire des requêtes
            allow-query { @ip_reseau/CIDR; }; # Mettre ' any; ' pour autoriser tout le monde

            # Activer cette option pour permettre au serveur de contacter le serveurs racines ou ses forwarders
            recursion yes;

            # Désactiver les transferts de zone (bonne pratique de sécurité)
        	allow-transfer { none; };

            # Serveurs DNS vers lesquels les requêtes seront redirigées (mettre la recursion à no)
            forwarders {
                    172.16.160.201;
                    172.16.160.202;
            };

            # Désactiver DNSSEC
            dnssec-enable no;
            dnssec-validation no;
    };
```

### Modifier sa configuration réseau pour interroger 127.0.0.1
```bash 
sudo vim /etc/sysconfig/network-scripts/ifcfg-eth0
```
Remplacer ou ajouter `DNS1=127.0.0.1` au fichier.

```bash
DEVICE=eth0
ONBOOT=yes
BOOTPROTO=static
IPADDR=10.0.0.15
NETMASK=255.255.240.0
GATEWAY=10.0.0.254
DNS1=127.0.0.1
```
:::tip Tips
Cette action modifira automatiquement le fichier `/etc/resolv.conf` pour que le système interroge le serveur DNS local.
:::

#### Redémarrer le service NetworkManager
```bash
sudo systemctl restart NetworkManager
```
